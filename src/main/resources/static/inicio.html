<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Artia Pasteler√≠a</title>

  <!-- Favicon -->
 <link rel="icon" href="data:;base64,=">

  <!-- Tu CSS -->
  <link rel="stylesheet" href="/css/layout.css">
  <link rel="stylesheet" href="/css/inicio.css" />

  <!-- Material Symbols (Google) -->
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0">

  <style>
    .material-symbols-outlined {
      font-family: "Material Symbols Outlined"; /* <-- clave */
      font-weight: normal;
      font-style: normal;
      font-size: 24px;
      line-height: 1;
      display: inline-block;
      vertical-align: middle;
      letter-spacing: normal;
      text-transform: none;
      white-space: nowrap;
      word-wrap: normal;
      direction: ltr;
      font-variation-settings: 'FILL' 0,'wght' 400,'GRAD' 0,'opsz' 24;
    }

    .user-wrap { position:relative; display:inline-block }
    .icon-btn { border:0; background:#f9e9d6; width:48px; height:48px; border-radius:50%; cursor:pointer }
    .user-menu {
      position:absolute; right:0; top:56px; background:#fff; border:1px solid #ddd; border-radius:12px;
      min-width:180px; padding:12px; box-shadow:0 8px 24px rgba(0,0,0,.12); z-index:1000
    }
    .user-menu a, .user-menu button {
      display:block; width:100%; text-align:left; padding:8px 10px; background:none; border:0; cursor:pointer
    }
    .user-name { font-weight:600; padding:8px 10px }
  </style>

  <!-- Google Fonts de tu sitio -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
</head>

<body>

<header class="top-header">
  <div class="header-top">
    <a href="#" class="logo">
      <img src="/img/logo.png" alt="Artia Logo" />
    </a>

    <div class="search-container">
      <span class="material-symbols-outlined" aria-hidden="true">search</span>
      <input type="text" placeholder="¬øQu√© comemos hoy...?" aria-label="Buscar"/>
    </div>

    <div class="header-icons">
      

      <div class="user-wrap">
        <button id="userBtn" class="icon-btn" aria-label="Perfil">
          <span class="material-symbols-outlined">account_circle</span>
        </button>

        <div id="userMenu" class="user-menu" hidden>
          <div class="user-menu-header">
            <span id="userName">Invitado</span>
          </div>
          <a href="/login.html" id="loginLink">Iniciar sesi√≥n</a>
          <a href="/registro.html" id="registerLink">Crear cuenta</a>
          <button id="logoutBtn" class="logout-btn">Cerrar sesi√≥n</button>
        </div>
      </div>

    <a href="carrito.html">
  <button class="icon-btn" aria-label="Carrito">
    <span class="material-symbols-outlined">shopping_cart</span>
  </button>
</a>
    </div>
  </div>
</header>

<!-- NAV MOVIDO DEBAJO DEL HEADER -->
<header class="main-header">
  <!-- NAV -->
  <nav class="main-nav" id="mainNav">
      
    <ul>
      <li><a href="/inicio.html"   class="active">Inicio</a></li>
      <li><a href="/nosotros.html">Nosotros</a></li>
      <li><a href="/catalogo.html">Cat√°logo</a></li>
      <li><a href="/eventos.html">Eventos</a></li>
      <li><a href="/contacto.html">Contacto</a></li>
      <li><a href="/rese√±as.html">Rese√±as</a></li>
      <li><a href="/foro.html">Foro</a></li>
    </ul>
  </nav>
</header>




<main>
  <section class="carousel-section">
    <div class="carousel-container">
      <div class="carousel-slide">
        <img src="/img/i_2.jpg" alt="Tarta de fresas" class="carousel-img" />
        <img src="/img/i_3.jpg" alt="Tiramis√∫" class="carousel-img" />
        <img src="/img/i_1.jpg" alt="Cheesecake" class="carousel-img" />
      </div>
    </div>
    <button class="carousel-arrow prev" id="prevBtn" aria-label="Anterior">
      <span class="material-symbols-outlined">chevron_left</span>
    </button>
    <button class="carousel-arrow next" id="nextBtn" aria-label="Siguiente">
      <span class="material-symbols-outlined">chevron_right</span>
    </button>
  </section>

  <section class="presentacion">
    <img src="/img/i_4.jpg" alt="Chef preparando torta" />
    <div class="presentacion-texto">
      <h2>FELICIDAD EN</h2>
      <h2 class="resaltado">UN SOLO <span>Bocado</span></h2>
      <p>
        Somos especialistas en tortas, bocaditos y panader√≠a artesanal de Ica,
        siempre inspirados en la celebraci√≥n de los peque√±os y grandes momentos de la vida.
      </p>
      <p>
        Han sido a√±os de crecimiento, experiencia y transformaci√≥n en lo que hoy
        es Artia, la pasteler√≠a de Mc Grill.
      </p>
    </div>
  </section>

  <section class="categorias">
    <div class="categoria">
      <img src="/img/i_5.jpg" alt="Postres" />
      <a href="#" class="label">POSTRES</a>
    </div>
    <div class="categoria">
      <img src="/img/i_6.jpg" alt="Tem√°tico" />
      <a href="#" class="label">TEM√ÅTICO</a>
    </div>
    <div class="categoria">
      <img src="/img/i_7.jpg" alt="Desayunos" />
      <a href="#" class="label">DESAYUNOS</a>
    </div>
    <div class="categoria">
      <img src="/img/i_8.jpg" alt="Bocaditos" />
      <a href="#" class="label">BOCADITOS</a>
    </div>
    <div class="categoria">
      <img src="/img/i_9.jpg" alt="Dulces" />
      <a href="#" class="label">DULCES</a>
    </div>
    <div class="categoria">
      <img src="/img/i_10.jpg" alt="Boxes" />
      <a href="#" class="label">BOXES</a>
    </div>
  </section>

  <section class="sucursal">
    <img src="/img/i_11.jpg" alt="Sucursal tienda" />
    <div class="sucursal-info">
      <p>CONOCE NUESTRA TIENDA</p>
      <h3>Tienda San Isidro - Ica</h3>

      <p><span class="material-symbols-outlined" aria-hidden="true">location_on</span> Av. Cutervo 300, San Isidro, Ica</p>
      <p><span class="material-symbols-outlined" aria-hidden="true">calendar_month</span> De Lunes a Domingo</p>
      <p><span class="material-symbols-outlined" aria-hidden="true">schedule</span> De 7:30AM a 10:00PM, Domingos de 7:00AM hasta las 7:00PM.</p>
      <p><span class="material-symbols-outlined" aria-hidden="true">call</span> +51 960 853 348</p>

      <a href="https://www.google.com/maps/place/Artia+Pasteler%C3%ADa/@-14.0803377,-75.7257022,17z/data=!3m1!4b1!4m6!3m5!1s0x9110e32bf8ebe335:0xfc641615dc8a308!8m2!3d-14.0803377!4d-75.7231273!16s%2Fg%2F11vpdngpdz?entry=ttu&g_ep=EgoyMDI1MDkyNC4wIKXMDSoASAFQAw%3D%3D" class="btn-mapa">IR A GOOGLE MAPS</a>
    </div>
  </section>
</main>

<footer>
  <div class="footer-container">
    <div class="footer-col">
      <h4>ESCR√çBENOS</h4>
      <p>+51 222 222 222</p>
      <p>artiapasteleria.com</p>
      <div class="social-icons">
        <!-- √çconos gen√©ricos (sin logos de marca) -->
        <a href="#"><span class="material-symbols-outlined">public</span></a>
        <a href="#"><span class="material-symbols-outlined">photo_camera</span></a>
        <a href="#"><span class="material-symbols-outlined">share</span></a>
      </div>
    </div>
    <div class="footer-col">
      <h4>INFORMACI√ìN</h4>
      <a href="#">T√©rminos y condiciones</a>
      <a href="#">Pol√≠ticas de Privacidad</a>
      <a href="#">Libro de Reclamaciones</a>
    </div>
    <div class="footer-col footer-logo">
      <img src="/img/logo2.png" alt="Logo Artia Footer" />
    </div>
  </div>
</footer>

<div class="floating-buttons">
  <a href="#" aria-label="WhatsApp">
    <img src="/img/whatsApp.jpg" alt="WhatsApp" />
  </a>

  <a href="#" aria-label="Chat" id="chatbotToggle">
    <img src="/img/chatbot.png" alt="Chat" />
  </a>
</div>

<!-- üìå Ventana del Chatbot (queda oculta al inicio) -->
<div id="chatbotWidget" class="chatbot-widget hidden">
  <div class="chatbot-header">
    <span>Artia Bot</span>
    <button id="chatbotClose" class="chatbot-close">√ó</button>
  </div>
  <div id="chatbotMessages" class="chatbot-messages"></div>
  <form id="chatbotForm" class="chatbot-input">
    <input id="chatbotText" type="text" placeholder="Escribe tu mensaje..." autocomplete="off"/>
    <button type="submit">Enviar</button>
  </form>
</div>


<script>
document.addEventListener('DOMContentLoaded', () => {
  // --- Estado de sesi√≥n / men√∫ de usuario ---
  const token       = localStorage.getItem('token');
  const user        = localStorage.getItem('user');
  const userBtn     = document.getElementById('userBtn');
  const userMenu    = document.getElementById('userMenu');
  const userName    = document.getElementById('userName');
  const loginLink   = document.getElementById('loginLink');
  const registerLink= document.getElementById('registerLink');
  const logoutBtn   = document.getElementById('logoutBtn');

  if (token && user) {
    if (userName) userName.textContent = user;
    if (loginLink)    loginLink.hidden = true;
    if (registerLink) registerLink.hidden = true;
    if (logoutBtn)    logoutBtn.hidden = false;
  } else {
    if (logoutBtn) logoutBtn.hidden = true;
  }

  if (userBtn && userMenu) {
    userBtn.addEventListener('click', (e) => {
      e.stopPropagation();
      userMenu.toggleAttribute('hidden');
    });
    document.addEventListener('click', () => userMenu.setAttribute('hidden', ''));
  }

  if (logoutBtn) {
    logoutBtn.addEventListener('click', () => {
      localStorage.clear();
      location.href = '/login.html';
    });
  }

  // --- Helper fetch con token (disponible global) ---
  window.authFetch = function(url, options = {}) {
    const t = localStorage.getItem('token');
    const headers = { ...(options.headers || {}) };
    if (t) headers['Authorization'] = 'Bearer ' + t;
    return fetch(url, { ...options, headers });
  };

  // --- Men√∫ hamburguesa ---
  const hamburgerBtn = document.getElementById('hamburgerBtn');
  const mainNav = document.getElementById('mainNav');
  if (hamburgerBtn && mainNav) {
    hamburgerBtn.addEventListener('click', () => mainNav.classList.toggle('show'));
  }

  // --- Estado activo en el nav ---
  const navLinks = document.querySelectorAll('.main-nav a');
  navLinks.forEach(link => {
    link.addEventListener('click', function() {
      navLinks.forEach(n => n.classList.remove('active'));
      this.classList.add('active');
    });
  });

  // --- Carrusel simple ---
  const slideContainer = document.querySelector('.carousel-slide');
  const nextBtn = document.getElementById('nextBtn');
  const prevBtn = document.getElementById('prevBtn');
  if (slideContainer && nextBtn && prevBtn) {
    nextBtn.addEventListener('click', () => {
      slideContainer.appendChild(slideContainer.firstElementChild);
    });
    prevBtn.addEventListener('click', () => {
      slideContainer.prepend(slideContainer.lastElementChild);
    });
  }
});
</script>
<script>
// ==== BUSCADOR GLOBAL CON SUGERENCIAS ====
(function(){
  const searchContainer = document.querySelector('.search-container');
  if (!searchContainer) return;

  const input = searchContainer.querySelector('input');
  if (!input) return;

  // Caja de sugerencias
  const box = document.createElement('div');
  box.className = 'search-suggestions';
  searchContainer.appendChild(box);

  let allProducts = null;   // cach√© en memoria
  let loading = false;

  async function loadProducts() {
    if (allProducts || loading) return;
    loading = true;
    try {
      const r = await fetch('/api/productos');
      if (!r.ok) throw 0;
      allProducts = await r.json();
    } catch {
      allProducts = [];
    } finally {
      loading = false;
    }
  }

  function filtrarProductos(q) {
    if (!allProducts) return [];
    const term = q.toLowerCase();
    if (!term) return [];
    return allProducts
      .filter(p => {
        const nombre = (p.nombre || '').toLowerCase();
        const desc   = (p.descripcion || '').toLowerCase();
        return nombre.includes(term) || desc.includes(term);
      })
      .slice(0, 5); // m√°ximo 5 sugerencias
  }

  function mostrarSugerencias(lista, q) {
    if (!lista.length) {
      box.style.display = 'none';
      return;
    }
    box.innerHTML = lista.map(p => `
      <div class="search-suggestion-item" data-nombre="${p.nombre}">
        <strong>${p.nombre}</strong>
        <small>S/ ${Number(p.precio).toFixed(2)}</small>
      </div>
    `).join('');
    box.style.display = 'block';

    box.querySelectorAll('.search-suggestion-item').forEach(item => {
      item.addEventListener('click', () => {
        const nombre = item.dataset.nombre;
        input.value = nombre;
        irACatalogo(nombre);
      });
    });
  }

  function irACatalogo(termino) {
    const url = '/catalogo.html?q=' + encodeURIComponent(termino);

    // Si ya estamos en cat√°logo, intentar filtrar sin recargar
    if (location.pathname.endsWith('/catalogo.html') &&
        typeof window.aplicarBusquedaCatalogo === 'function') {
      history.replaceState(null, '', url);
      window.aplicarBusquedaCatalogo(termino);
    } else {
      location.href = url;
    }
  }

  // Eventos
  input.addEventListener('input', async () => {
    const value = input.value.trim();
    if (!value) {
      box.style.display = 'none';
      return;
    }
    await loadProducts();
    const lista = filtrarProductos(value);
    mostrarSugerencias(lista, value);
  });

  input.addEventListener('focus', async () => {
    const value = input.value.trim();
    if (!value) return;
    await loadProducts();
    const lista = filtrarProductos(value);
    mostrarSugerencias(lista, value);
  });

  input.addEventListener('keydown', (e) => {
    if (e.key === 'Enter') {
      e.preventDefault();
      const term = input.value.trim();
      if (!term) return;
      box.style.display = 'none';
      irACatalogo(term);
    }
  });

  // Cerrar sugerencias al hacer clic fuera
  document.addEventListener('click', (e) => {
    if (!searchContainer.contains(e.target)) {
      box.style.display = 'none';
    }
  });
})();
</script>

<script>
document.addEventListener('DOMContentLoaded', async () => {
  const toggleBtn = document.getElementById('chatbotToggle');
  const closeBtn  = document.getElementById('chatbotClose');
  const widget    = document.getElementById('chatbotWidget');
  const form      = document.getElementById('chatbotForm');
  const input     = document.getElementById('chatbotText');
  const messages  = document.getElementById('chatbotMessages');

  // ========= Utils =========
  function randomChoice(arr) {
    return arr[Math.floor(Math.random() * arr.length)];
  }

  // ====== 1) Abrir / cerrar ======
  function openChat() {
    widget.classList.remove('hidden');
    input.focus();
  }
  function closeChat() {
    widget.classList.add('hidden');
  }

  toggleBtn.addEventListener('click', e => {
    e.preventDefault();
    widget.classList.contains('hidden') ? openChat() : closeChat();
  });
  closeBtn.addEventListener('click', closeChat);

  // ====== 2) Utilidades de mensajes ======
  function addMessage(text, from = 'bot') {
    const div = document.createElement('div');
    div.className = `chatbot-msg ${from}`;
    div.textContent = text;
    messages.appendChild(div);
    messages.scrollTop = messages.scrollHeight;
  }

  // ====== 3) Cargar productos desde tu backend ======
  let productosCache = [];
  let ultimasSugerencias = []; // para luego poder "agrega el 1"

  async function cargarProductos() {
    try {
      const r = await fetch('/api/productos');
      if (!r.ok) throw new Error('Error al cargar productos');
      productosCache = await r.json(); // se espera algo tipo [{idProducto,nombre,precio,imagenUrl,stock},...]
    } catch (err) {
      console.error(err);
      productosCache = [];
    }
  }

  // normalizar texto (min√∫sculas, sin tildes)
  function normalizar(str) {
    return (str || '')
      .toLowerCase()
      .normalize('NFD')
      .replace(/[\u0300-\u036f]/g, '');
  }

  // buscar productos por texto usando coincidencias simples (pseudo-IA)
  function buscarProductosPorTexto(texto) {
    if (!productosCache.length) return [];
    const q = normalizar(texto);
    const tokens = q.split(/\s+/).filter(t => t.length > 2);

    const resultados = productosCache.map(p => {
      const base = normalizar(p.nombre + ' ' + (p.descripcion || '') + ' ' + (p.categoria || ''));
      let score = 0;

      tokens.forEach(t => {
        if (base.includes(t)) score += 2;          // coincidencia normal
        if (base.startsWith(t)) score += 1;        // parecido al comienzo
      });

      if (q.includes('torta') || q.includes('pastel')) {
        if (base.includes('torta') || base.includes('pastel')) score += 1;
      }
      if (q.includes('chocolate') && base.includes('chocolate')) score += 1;
      if (q.includes('fresa') && base.includes('fresa')) score += 1;

      return { prod: p, score };
    });

    return resultados
      .filter(r => r.score > 0)
      .sort((a,b) => b.score - a.score)
      .slice(0, 3)              // top 3 sugerencias
      .map(r => r.prod);
  }

  // ====== 4) Intentar agregar producto por √≠ndice (1,2,3) ======
  function intentarAgregarPorIndice(texto) {
    if (!ultimasSugerencias.length) return false;
    const t = normalizar(texto);
    let idx = null;

    if (/primer|primero|1\b/.test(t)) idx = 0;
    else if (/segundo|2\b/.test(t))   idx = 1;
    else if (/tercer|tercero|3\b/.test(t)) idx = 2;

    if (idx === null || !ultimasSugerencias[idx]) return false;

    const p = ultimasSugerencias[idx];
    if (typeof window.addToCart === 'function') {
      window.addToCart(
        p.nombre,
        Number(p.precio),
        p.imagenUrl || '/img/placeholder.png',
        p.idProducto
      );
      addMessage(
        randomChoice([
          `Listo, agregu√© ‚Äú${p.nombre}‚Äù al carrito üõí`,
          `Hecho üòé ‚Äú${p.nombre}‚Äù ya est√° viajando a tu carrito.`,
          `¬°Boom! ‚Äú${p.nombre}‚Äù acaba de aparecer en tu carrito m√°gicamente ‚ú®üõí`
        ]),
        'bot'
      );
    } else {
      addMessage(
        randomChoice([
          `No encontr√© la funci√≥n de carrito, pero igual te recomiendo ‚Äú${p.nombre}‚Äù.`,
          `Ups, no pude ponerlo en el carrito, pero ‚Äú${p.nombre}‚Äù es una joyita üíé.`,
          `No tengo acceso al carrito, pero si fuera t√∫, me quedaba con ‚Äú${p.nombre}‚Äù üòâ.`
        ]),
        'bot'
      );
    }
    return true;
  }

  // ====== 5) L√≥gica principal de respuesta "inteligente" ======
  function generarRespuesta(textoOriginal) {
    const t = normalizar(textoOriginal);

    // saludos
    if (/hola|buenas|hey|holaa|holi|buenos dias|buenos dias|buenas tardes|buenas noches/.test(t)) {
      return randomChoice([
        '¬°Hola! Soy Artia Bot ü§ñüç∞. Vengo con tortas, caf√© y sarcasmo ligero. ¬øQu√© se te antoja?',
        '¬°Buenas! Soy tu asistente pastelero digital. Dime qu√© quieres y vemos c√≥mo endulzamos tu d√≠a üòè.',
        'Hey, hola üëã Soy Artia Bot. No puedo hornear, pero s√≠ recomendar cosas ricas. ¬øQu√© se te antoja hoy?',
        '¬°Holaaa! ü§ñ‚ú® Si lo que buscas es az√∫car y carbohidratos felices, est√°s en el chat correcto.'
      ]);
    }

    // horario
    if (t.includes('horario') || t.includes('hora') || t.includes('abren') || t.includes('cierran')) {
      return randomChoice([
        'üïê Atendemos de lunes a s√°bado de 9:00 am a 9:00 pm y domingos de 10:00 am a 7:00 pm. S√≠, somos casi adictos al trabajo y al az√∫car.',
        'Nuestro horario dulce es: lun‚Äìs√°b 9:00 am a 9:00 pm, dom 10:00 am a 7:00 pm. Ven antes de que el antojo te gane üòú.',
        'Abrimos de lunes a s√°bado de 9:00 am a 9:00 pm y domingos de 10:00 am a 7:00 pm. Si vienes fuera de ese horario solo atiendo yo‚Ä¶ pero por chat üòÇ.'
      ]);
    }

    // delivery
    if (t.includes('delivery') || t.includes('envio') || t.includes('env√≠o') || t.includes('enviar')) {
      return randomChoice([
        'üöö Hacemos delivery en Ica. Demoramos aprox. 40‚Äì60 min seg√∫n la zona. M√°s r√°pido que decidir qu√© serie ver en Netflix.',
        'S√≠ tenemos delivery üòéüöö. Ica, 40‚Äì60 minutos aprox. T√∫ solo espera, yo hago que la torta viaje hacia ti.',
        'Claro, enviamos a domicilio por Ica. El delivery suele tardar de 40 a 60 min. Tiempo perfecto para elegir la pel√≠cula mientras llega el postre üòâ.'
      ]);
    }

    // ubicaci√≥n
    if (t.includes('donde estan') || t.includes('donde est√°n') ||
        t.includes('direccion') || t.includes('direcci√≥n') ||
        t.includes('ubicacion') || t.includes('ubicaci√≥n')) {
      return randomChoice([
        'üìç Estamos en Av. Lima 123 ‚Äì Ica (a media cuadra del parque principal). Si hueles a caf√© y torta, est√°s cerca.',
        'Nos encuentras en Av. Lima 123 ‚Äì Ica, cerquita del parque principal. Sigue el aroma a pan reci√©n horneado üòã.',
        'Ubicaci√≥n secreta (pero no tanto): Av. Lima 123 ‚Äì Ica, a media cuadra del parque principal. Prometo que vale la caminata.'
      ]);
    }

    // intento de "agrega el 1 / el segundo / el tercero" al carrito
    if (/agrega|a√±ade|anade|pon en el carrito|agregalo|agr√©galo|lo quiero|lo compro|metelo al carrito|m√©telo al carrito/.test(t)) {
      const ok = intentarAgregarPorIndice(t);
      if (ok) return null; // ya respondimos dentro de la funci√≥n
      // si no se pudo por √≠ndice, sigue con recomendaci√≥n normal
    }

    // b√∫squeda de productos seg√∫n lo que escribe
    const sugerencias = buscarProductosPorTexto(textoOriginal);
    if (sugerencias.length) {
      ultimasSugerencias = sugerencias;

      const encabezado = randomChoice([
        'Seg√∫n lo que me dices, te podr√≠an gustar:',
        'Ok, ya analic√© tu antojo üëÄ Mira estas opciones:',
        'Basado en tu mensaje, mi radar pastelero recomienda:',
        'Mi algoritmo ultra-secreto (y un poco gordito) sugiere:'
      ]);

      let msg = encabezado + '\n';
      sugerencias.forEach((p, i) => {
        msg += `\n${i+1}) ${p.nombre} ‚Äì S/ ${Number(p.precio).toFixed(2)}`;
        if (p.descripcion) msg += `\n   ${p.descripcion}`;
      });

      const cierre = randomChoice([
        '\n\nSi quieres, dime: "agrega el 1", "agrega el segundo", etc. y lo pongo directo en tu carrito üõí.',
        '\n\nPara hacerlo oficial, solo di: "agrega el 1", "agrega el segundo" y yo lo mando a tu carrito üõí.',
        '\n\n¬øTe decides por uno? Dime: "agrega el 1", "agrega el tercero", etc., y aparece en tu carrito como por arte de magia üõí‚ú®.'
      ]);

      msg += cierre;
      return msg;
    }

    // preguntas de precios generales
    if (t.includes('precio') || t.includes('cuanto cuesta') || t.includes('cu√°nto cuesta') || t.includes('cuanto vale') || t.includes('cu√°nto vale')) {
      return randomChoice([
        'Dime qu√© producto te interesa (por ejemplo: "precio de la torta de chocolate") y te muestro opciones con sus precios. Soy como un men√∫, pero que responde üòå.',
        'Preg√∫ntame algo como "precio de la cheesecake" o "cu√°nto cuesta una torta de chocolate para 10 personas" y te doy los precios exactos üí∏.',
        'Estoy listo para hablar de n√∫meros üí∞. Solo dime qu√© producto quieres revisar y te doy los precios y opciones.'
      ]);
    }

    // fallback
    return randomChoice([
      'üòä Soy Artia Bot. Puedo recomendarte tortas, postres, caf√©s, delivery u horarios. Preg√∫ntame algo como: "recomi√©ndame una torta de chocolate para 10 personas".',
      'No estoy 100% seguro de lo que quieres, pero s√© de postres, caf√© y az√∫car. Intenta algo como: "quiero una torta de chocolate" o "qu√© me recomiendas para un cumplea√±os".',
      'Mi cerebro digital se qued√≥ pensando ü§î. Puedo ayudarte con recomendaciones, precios, delivery y horarios. Prueba preguntando: "recomi√©ndame una torta para 15 personas".',
      'Mmm‚Ä¶ no entend√≠ del todo, pero no te preocupes, no eres t√∫, soy yo üòÖ. P√≠deme recomendaciones de tortas, postres o caf√©s y te ayudo.'
    ]);
  }

  // ====== 6) Carga inicial ======
  await cargarProductos();
  addMessage(
    randomChoice([
      '¬°Hola! Soy Artia Bot ü§ñüç∞ ¬øEn qu√© te ayudo hoy?',
      'Bienvenido a Artia Chat üç∞‚ú®. Cu√©ntame tu antojo y vemos qu√© magia hacemos.',
      'Hola, humano con hambre (supongo) üòÑ. Soy Artia Bot, preg√∫ntame por tortas, caf√©s o delivery.',
      '¬°Hey! Soy el bot oficial de Artia. No muerdo, pero s√≠ recomiendo cosas ricas. ¬øQu√© buscas hoy?'
    ])
  );

  // ====== 7) Enviar mensaje ======
  form.addEventListener('submit', e => {
    e.preventDefault();
    const text = input.value.trim();
    if (!text) return;

    addMessage(text, 'user');
    input.value = '';

    setTimeout(() => {
      const resp = generarRespuesta(text);
      if (resp) addMessage(resp, 'bot');
      // si resp es null, fue porque ya se mand√≥ mensaje dentro de intentarAgregarPorIndice
    }, 350);
  });

});
</script>


</body>
</html>